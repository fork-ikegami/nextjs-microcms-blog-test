<!DOCTYPE html><html><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement;var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.setAttribute('data-theme', 'dark'):d.setAttribute('data-theme', 'light')}else if(e) d.setAttribute('data-theme', e)}catch(e){}}()</script><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0"/><meta name="robots" content="noindex,nofollow,noarchive"/><title> 記事一覧｜next-microcms-blog-test</title><meta name="next-head-count" content="5"/><link rel="preload" href="/nextjs-microcms-blog-test/_next/static/css/a93fb84bc607d6c6.css" as="style"/><link rel="stylesheet" href="/nextjs-microcms-blog-test/_next/static/css/a93fb84bc607d6c6.css" data-n-g=""/><link rel="preload" href="/nextjs-microcms-blog-test/_next/static/css/d0fcf342a1aa64d2.css" as="style"/><link rel="stylesheet" href="/nextjs-microcms-blog-test/_next/static/css/d0fcf342a1aa64d2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/nextjs-microcms-blog-test/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/nextjs-microcms-blog-test/_next/static/chunks/webpack-352217a0ecded989.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/chunks/main-f390e11636f91db7.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/chunks/pages/_app-2c6646141885f676.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/chunks/0c428ae2-8469b33eaefe6d84.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/chunks/9a1974b2-de1ca809fb92604f.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/chunks/6728d85a-a08cd2151dc28e86.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/chunks/23-6d6b46bb91d48e4f.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/chunks/710-0c888850f0e58af8.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/chunks/641-ed80394341dece18.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/chunks/pages/blog/page/%5Bnum%5D-79ca5c98e1d55418.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/ocqdSihvkso1s5JVS6EZE/_buildManifest.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/ocqdSihvkso1s5JVS6EZE/_ssgManifest.js" defer=""></script><script src="/nextjs-microcms-blog-test/_next/static/ocqdSihvkso1s5JVS6EZE/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="Layout_flexWrap__j3vvR"><div class="Layout_flexSet__xrJqK"><header id="globalHeader" class="Header_header__Kpax6"><a class="Header_link__LXEkx" href="/nextjs-microcms-blog-test/"><img src="/nextjs-microcms-blog-test/_next/static/media/logo.2f5f7284.png" alt="" class="Header_logo__q5xpd"/>next-microcms-blog-test</a><button class="ThemeToggle_button__IWtFm"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 30 30" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.74,14.44c0-1.52,0.3-2.98,0.89-4.37s1.4-2.58,2.4-3.59s2.2-1.81,3.59-2.4s2.84-0.89,4.37-0.89s2.98,0.3,4.37,0.89
	s2.59,1.4,3.6,2.4s1.81,2.2,2.4,3.59s0.89,2.84,0.89,4.37s-0.3,2.98-0.89,4.37s-1.4,2.59-2.4,3.6s-2.2,1.81-3.6,2.4
	s-2.85,0.89-4.37,0.89s-2.98-0.3-4.37-0.89s-2.58-1.4-3.59-2.4s-1.81-2.2-2.4-3.6S3.74,15.97,3.74,14.44z M14.8,24.51h0.19
	c1.37,0,2.67-0.27,3.91-0.8s2.31-1.25,3.21-2.15s1.61-1.97,2.15-3.21s0.8-2.54,0.8-3.91c0-1.36-0.27-2.66-0.8-3.9
	s-1.25-2.31-2.15-3.21s-1.97-1.61-3.21-2.15s-2.54-0.8-3.91-0.8H14.8V24.51z"></path></svg></button></header><div class="Layout_col2__7JOz_"><main class="Layout_left__f4bZF"><ul class="BlogList_blogList__prCx7"><li class="BlogList_blogItem__DOcdc"><div class="BlogList_blogText__Rntl2"><a href="/nextjs-microcms-blog-test/blog/m4qnmjr7rbi/"><h1 class="BlogList_title__TXBZp">gtagで複数のGoogleアナリティクスプロパティを設定する（GA4とUAどっちも書く）</h1></a><div><time dateTime="2022-03-07T10:37:24.000Z">2022.03.07</time><a href="/nextjs-microcms-blog-test/category/web/page/1/"><span class="BlogList_category___3A4K">Web全般</span></a></div></div></li><li class="BlogList_blogItem__DOcdc"><div class="BlogList_blogText__Rntl2"><a href="/nextjs-microcms-blog-test/blog/bksplxco9hzx/"><h1 class="BlogList_title__TXBZp">Firebase HostingにBasic認証かけるときのFunctionsはasia-northeast1じゃダメだった</h1></a><div><time dateTime="2022-02-21T10:35:04.000Z">2022.02.21</time><a href="/nextjs-microcms-blog-test/category/web/page/1/"><span class="BlogList_category___3A4K">Web全般</span></a></div></div></li><li class="BlogList_blogItem__DOcdc"><div class="BlogList_blogText__Rntl2"><a href="/nextjs-microcms-blog-test/blog/zk85gkgtz/"><h1 class="BlogList_title__TXBZp">anime.jsのタイムラインでアニメーション管理</h1></a><div><time dateTime="2022-02-14T10:19:00.000Z">2022.02.14</time><a href="/nextjs-microcms-blog-test/category/javascript/page/1/"><span class="BlogList_category___3A4K">JavaScript</span></a></div></div></li><li class="BlogList_blogItem__DOcdc"><div class="BlogList_blogText__Rntl2"><a href="/nextjs-microcms-blog-test/blog/31apigdy1nas/"><h1 class="BlogList_title__TXBZp">anime.jsでスムーズスクロール実装</h1></a><div><time dateTime="2022-02-10T10:06:24.000Z">2022.02.10</time><a href="/nextjs-microcms-blog-test/category/javascript/page/1/"><span class="BlogList_category___3A4K">JavaScript</span></a></div></div></li><li class="BlogList_blogItem__DOcdc"><div class="BlogList_blogText__Rntl2"><a href="/nextjs-microcms-blog-test/blog/1zk8o5cgg2im/"><h1 class="BlogList_title__TXBZp">Flexboxでフッター下付けIE対応</h1></a><div><time dateTime="2022-02-08T07:20:57.000Z">2022.02.08</time><a href="/nextjs-microcms-blog-test/category/css/page/1/"><span class="BlogList_category___3A4K">CSS</span></a></div></div></li></ul><ul class="Pagination_list__hd6Cl"><li class="Pagination_item__cqQv3"><span class="Pagination_current__KfobZ">1</span></li><li class="Pagination_item__cqQv3"><a class="Pagination_link__PPSXx" href="/nextjs-microcms-blog-test/blog/page/2/">2</a></li><li class="Pagination_item__cqQv3 Pagination_arrow__HUFDF"><a class="Pagination_link__PPSXx" href="/nextjs-microcms-blog-test/blog/page/2/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><polyline fill="none" stroke="#000" stroke-width="2" points="7 2 17 12 7 22"></polyline></svg></a></li></ul></main><nav class="Layout_right__r3WSU Layout_nav__yfNQD"><dl><dt>Categories</dt><dd><ul class="Layout_categoryList__IgIdq"><li><a href="/nextjs-microcms-blog-test/category/random-notes/page/1/">雑記<span class="Layout_categoryCount__VX8pL">2</span></a></li><li><a href="/nextjs-microcms-blog-test/category/web/page/1/">Web全般<span class="Layout_categoryCount__VX8pL">2</span></a></li><li><a href="/nextjs-microcms-blog-test/category/javascript/page/1/">JavaScript<span class="Layout_categoryCount__VX8pL">4</span></a></li><li><a href="/nextjs-microcms-blog-test/category/css/page/1/">CSS<span class="Layout_categoryCount__VX8pL">1</span></a></li></ul></dd></dl><dl><dt>Tags</dt><dd><ul class="Layout_tagList__2etmu"><li><a href="/nextjs-microcms-blog-test/tag/gas/page/1/">#<!-- -->GAS</a></li><li><a href="/nextjs-microcms-blog-test/tag/jamstack/page/1/">#<!-- -->JAMStack</a></li><li><a href="/nextjs-microcms-blog-test/tag/aws/page/1/">#<!-- -->AWS</a></li><li><a href="/nextjs-microcms-blog-test/tag/contentful/page/1/">#<!-- -->Contentful</a></li><li><a href="/nextjs-microcms-blog-test/tag/reactjs/page/1/">#<!-- -->React.js</a></li><li><a href="/nextjs-microcms-blog-test/tag/ga4/page/1/">#<!-- -->GA4</a></li><li><a href="/nextjs-microcms-blog-test/tag/gtag/page/1/">#<!-- -->gtag</a></li><li><a href="/nextjs-microcms-blog-test/tag/google-analytics/page/1/">#<!-- -->GA</a></li><li><a href="/nextjs-microcms-blog-test/tag/firebase/page/1/">#<!-- -->Firebase</a></li><li><a href="/nextjs-microcms-blog-test/tag/nuxtjs/page/1/">#<!-- -->Nuxt.js</a></li><li><a href="/nextjs-microcms-blog-test/tag/vuejs/page/1/">#<!-- -->Vue.js</a></li><li><a href="/nextjs-microcms-blog-test/tag/study-group/page/1/">#<!-- -->勉強会</a></li><li><a href="/nextjs-microcms-blog-test/tag/flexbox/page/1/">#<!-- -->Flexbox</a></li><li><a href="/nextjs-microcms-blog-test/tag/for-ie/page/1/">#<!-- -->IE</a></li></ul></dd></dl></nav></div></div><footer class="Footer_footer__Ksopt"></footer><button type="button" id="scrollTopButton" style="opacity:0;pointer-events:none" class="Footer_button__NUyri"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"></path></svg></button></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"blogData":[{"id":"m4qnmjr7rbi","createdAt":"2022-03-24T10:37:24.846Z","updatedAt":"2022-03-24T10:37:24.846Z","publishedAt":"2022-03-07T10:37:24.000Z","revisedAt":"2022-03-24T10:37:24.846Z","title":"gtagで複数のGoogleアナリティクスプロパティを設定する（GA4とUAどっちも書く）","body":"\u003ch2 id=\"h5c0c7cb22e\"\u003e問題\u003c/h2\u003e\u003cp\u003eすでにGoogle AnalyticsのGlobal site tag（gtag）が埋め込まれているサイトで、新たにGA4のタグを追加してほしいと言われたので、調べてみました。\u003c/p\u003e\u003ch2 id=\"h001d82110c\"\u003e\u003cbr\u003eGA4とは\u003c/h2\u003e\u003cblockquote\u003eGA4は2020年10月にリリースされた新しいバージョンで、4番目のGoogleアナリティクスなので「Google Analytics 4（GA4）」とGoogleが名付けたそうです。 （正確には「Google Analytics for 4 プロパティ」のようです。） by\u0026nbsp;\u003ca href=\"https://weble.tokyo/blogs/ga4/1534/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003e【GA4とUAを両方導入しよう】2021年版！初心者でもできるGoogleアナリティクスの導入方法 – WEBLE\u003c/a\u003e\u003c/blockquote\u003e\u003cp\u003eへ～ 計測・解析の面では結構機能が異なるようなのですが、埋め込む側としては見慣れたUAの後発って捉えておけば良さそうです。\u003c/p\u003e\u003ch2 id=\"hd970156c24\"\u003e\u003cbr\u003e対応\u003c/h2\u003e\u003cp\u003eたとえば UA-11111-1とG-22222を入れたい場合\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e  \u0026lt;!-- Global site tag (gtag.js) - Google Analytics --\u0026gt;\n  \u0026lt;script async src=\"https://www.googletagmanager.com/gtag/js?id=UA-11111-1\"\u0026gt;\u0026lt;/script\u0026gt;\n  \u0026lt;script\u0026gt;\n    window.dataLayer = window.dataLayer || [];\n    function gtag() {\n      dataLayer.push(arguments);\n    }\n    gtag('js', new Date());\n    gtag('config', 'UA-11111-1');\n    gtag('config', 'G-22222');\n  \u0026lt;/script\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eこれだけで大丈夫でした。 また、2行目の id= に入れるのはUA-でもG-でも大丈夫のようです。柔軟。\u003cbr\u003eこのとき、自分で計測データを見ていたわけではないので確実ではないのですが、\u0026nbsp;\u003ccode\u003e\u0026lt;/head\u0026gt;\u003c/code\u003eの直前に置いていたときは動かず、Googleの指定通り\u003ccode\u003e\u0026lt;head\u0026gt;\u003c/code\u003e直後に置いたら動きました。\u003c/p\u003e\u003ch2 id=\"h3de35099b3\"\u003e\u003cbr\u003e参考\u003c/h2\u003e\u003cp\u003e\u003ca href=\"https://developers.google.com/analytics/devguides/collection/ga4/basic-tag?hl=ja\u0026amp;technology=gtagjs\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eユニバーサル アナリティクスと Google アナリティクス 4 プロパティ用にタグを設定する方法 | Google Developers\u003c/a\u003e\u0026nbsp;\u003ca href=\"https://developers.google.com/analytics/devguides/collection/ga4?hl=ja#add_an_additional_google_analytics_property_to_an_existing_tag\" target=\"_blank\" rel=\"noopener noreferrer\"\u003e既存のタグに Google アナリティクス プロパティを追加する\u003c/a\u003e\u0026nbsp;\u003ca href=\"https://support.google.com/analytics/answer/10271001?hl=ja\" target=\"_blank\" rel=\"noopener noreferrer\"\u003e[GA4] analytics.js 実装のアップグレード\u003c/a\u003e\u0026nbsp;\u003ca href=\"https://weble.tokyo/blogs/ga4/1534/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003e【GA4とUAを両方導入しよう】2021年版！初心者でもできるGoogleアナリティクスの導入方法\u003c/a\u003e\u003c/p\u003e","category":{"id":"web","createdAt":"2022-03-24T07:11:35.245Z","updatedAt":"2022-03-24T07:11:35.245Z","publishedAt":"2022-03-24T07:11:35.245Z","revisedAt":"2022-03-24T07:11:35.245Z","name":"Web全般"},"tag":[{"id":"google-analytics","createdAt":"2022-03-24T10:36:26.389Z","updatedAt":"2022-03-24T10:36:26.389Z","publishedAt":"2022-03-24T10:36:26.389Z","revisedAt":"2022-03-24T10:36:26.389Z","name":"GA"},{"id":"gtag","createdAt":"2022-03-24T10:36:41.527Z","updatedAt":"2022-03-24T10:36:41.527Z","publishedAt":"2022-03-24T10:36:41.527Z","revisedAt":"2022-03-24T10:36:41.527Z","name":"gtag"},{"id":"ga4","createdAt":"2022-03-24T10:36:53.897Z","updatedAt":"2022-03-24T10:36:53.897Z","publishedAt":"2022-03-24T10:36:53.897Z","revisedAt":"2022-03-24T10:36:53.897Z","name":"GA4"}]},{"id":"bksplxco9hzx","createdAt":"2022-03-24T10:35:04.947Z","updatedAt":"2022-03-24T10:35:04.947Z","publishedAt":"2022-02-21T10:35:04.000Z","revisedAt":"2022-03-24T10:35:04.947Z","title":"Firebase HostingにBasic認証かけるときのFunctionsはasia-northeast1じゃダメだった","body":"\u003cp\u003eリージョンは近い方が良いと聞いたことがあったので、開発のFunctionsをマネして東京リージョンにしたら hostingしたサイトにアクセスした際エラーになってしまいました。\u003c/p\u003e\u003cblockquote\u003e重要: HTTP 関数を使用して Firebase Hosting の動的コンテンツを提供する場合は、us-central1 を使用する必要があります。 by\u0026nbsp;\u003ca href=\"https://firebase.google.com/docs/functions/locations?hl=ja#http_and_client-callable_functions\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eCloud Functions のロケーション | Firebase\u003c/a\u003e\u003c/blockquote\u003e\u003cp\u003eデフォルトでリージョンは\u0026nbsp;\u003ccode\u003eus-central1\u003c/code\u003e\u0026nbsp;になるうえ、FunctionsでHostingするケースも少ないかと思うので、 とくにいじらなければ引っかからない箇所かと思います😂\u003c/p\u003e","category":{"id":"web","createdAt":"2022-03-24T07:11:35.245Z","updatedAt":"2022-03-24T07:11:35.245Z","publishedAt":"2022-03-24T07:11:35.245Z","revisedAt":"2022-03-24T07:11:35.245Z","name":"Web全般"},"tag":[{"id":"firebase","createdAt":"2022-03-24T10:34:32.220Z","updatedAt":"2022-03-24T10:34:32.220Z","publishedAt":"2022-03-24T10:34:32.220Z","revisedAt":"2022-03-24T10:34:32.220Z","name":"Firebase"}]},{"id":"zk85gkgtz","createdAt":"2022-03-24T10:19:00.827Z","updatedAt":"2022-03-24T10:19:00.827Z","publishedAt":"2022-02-14T10:19:00.000Z","revisedAt":"2022-03-24T10:19:00.827Z","title":"anime.jsのタイムラインでアニメーション管理","body":"\u003ch2 id=\"h8d027c8ed3\"\u003eはじめに\u003c/h2\u003e\u003cp\u003e最近はたいていの動きをCSSアニメーションで実装できて便利ですね。\u003cbr\u003eしかしちょこっとのアニメなら良いですが、CSSのみでは複数のアニメーションを管理しづらいです。何秒後にこれが走ってその前にあれとそれが・・など管理するのは大変ですし、そこに他のJSも任意のタイミングで動かしたいときた日には発狂してしまいます。\u003cbr\u003eそこでanime.jsというライブラリを使ってみました。\u003c/p\u003e\u003ch2 id=\"h93ce967be6\"\u003eanime.jsとは\u003c/h2\u003e\u003cp\u003eanime.jsは\u003c/p\u003e\u003cul\u003e\u003cli\u003ejQuery不要\u003c/li\u003e\u003cli\u003eIE11サポート\u003c/li\u003e\u003cli\u003eCSS/DOM/SVG/JavaScriptオブジェクト対応\u003c/li\u003e\u003cli\u003eMITライセンス（商用利用可）\u003c/li\u003e\u003cli\u003e軽量（anime.min.jsが17.3KB）\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eな定番ライブラリです。\u003c/p\u003e\u003ch3 id=\"h773980ed2b\"\u003e実装方法の比較\u003c/h3\u003e\u003cp\u003e他のライブラリも検討したのですが、今回やりたいことは\u003c/p\u003e\u003col\u003e\u003cli\u003e動作はCSSアニメーションだけで作れるレベル\u003c/li\u003e\u003cli\u003e複数のアニメーションを管理したい\u003c/li\u003e\u003cli\u003eアニメーション中にJS発火を仕込みたい\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eだったので、この条件で考えてみました。\u003c/p\u003e\u003cul\u003e\u003cli\u003ejQuery (87.4KB)\u003c/li\u003e\u003cli\u003e$.animate()で作れますが、アニメーションのためにわざわざ入れる必要はないと思います。\u003c/li\u003e\u003cli\u003e\u003ca style=\"color:#258fb8\" href=\"http://velocityjs.org/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eVelocity.js\u003c/a\u003e\u0026nbsp;(47.5KB)\u003c/li\u003e\u003cli\u003ejQueryの$.animate()と同じAPIが使えます。jQueryに慣れてる人は良いかもしれない。\u003c/li\u003e\u003cli\u003e\u003ca style=\"color:#258fb8\" href=\"https://greensock.com/gsap/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eGSAP\u003c/a\u003e\u0026nbsp;(61.9KB)\u003c/li\u003e\u003cli\u003e海外でよく使われているらしい。大量のオブジェクトを動かしたいなどより重い/高度な処理をしたいときに向いてそうです。\u003c/li\u003e\u003cli\u003e\u003ca style=\"color:#258fb8\" href=\"https://developer.mozilla.org/ja/docs/Web/API/Web_Animations_API\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eWeb Animation API\u003c/a\u003e\u003c/li\u003e\u003cli\u003eライブラリではなく、アニメーションの標準仕様です。ただしまだ草案。\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e最初はWeb Animation APIを使って、ライブラリなしでイケるならやってみたいなと思い試してみました。\u003cbr\u003eかなり直感的に書けるしやりたいこともできて、Polyfillを使えばIE11でも問題なく動作した！のですが、、、\u003cbr\u003e自動的にアニメーションを発火させたかったところ、iOSではどこかをタップしないと動き出さなかったりどうにも動作が安定せず・・採用は見送りました😂可能性は感じましたけども!\u003cbr\u003eで最終的にファイルサイズや動作の安定性を考えてanime.jsにしました。\u003cbr\u003e（いいかもと思ったけどちゃんと調べてないのもある・・\u003ca style=\"color:#258fb8\" href=\"https://github.com/mojs/mojs\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eMo.js\u003c/a\u003e\u0026nbsp;/\u0026nbsp;\u003ca style=\"color:#258fb8\" href=\"https://github.com/popmotion/popmotion\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ePopmotion\u003c/a\u003e\u0026nbsp;/\u0026nbsp;\u003ca style=\"color:#258fb8\" href=\"https://github.com/thednp/kute.js/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eKute.js\u003c/a\u003e）\u003c/p\u003e\u003ch2 id=\"h4d849f4362\"\u003e使い方\u003c/h2\u003e\u003cp\u003e書き方はとてもシンプルで\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eanime({\n  targets: '.hoge',\n  translateX: 250\n});\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eとするだけで、指定したクラスの要素を横に移動することができます。\u003cbr\u003e\u003ca style=\"color:#258fb8\" href=\"https://animejs.com/documentation/#cssSelector\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eTARGETS - CSS SELECTOR\u003c/a\u003e\u003cbr\u003e\u003ccode\u003etargets\u003c/code\u003eはNodeListでも良いので、複数要素を一気に動かしたいときは\u003ccode\u003etargets: el.querySelectorAll('.hoge')\u003c/code\u003eなどでもイケます。\u003cbr\u003e\u003ca style=\"color:#258fb8\" href=\"https://animejs.com/documentation/#domNode\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eTARGETS - DOM NODE / NODELIST\u003c/a\u003e\u003cbr\u003eただ正直この程度だったらCSSだけで十分ですよね。\u003c/p\u003e\u003ch3 id=\"hd5e98f1c89\"\u003eTimeline\u003c/h3\u003e\u003cp\u003e複数アニメーションを管理したいときは\u003ca style=\"color:#258fb8\" href=\"https://animejs.com/documentation/#timelineBasics\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eTimeline\u003c/a\u003eという機能が便利です。\u003cbr\u003e4つのdiv（四角）が順々に移動するタイムラインを作ってみました。\u003c/p\u003e\u003ciframe class=\"embedly-embed\" src=\"https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fjsfiddle.net%2Fwhike_chan%2F1dku2378%2Fembedded%2F\u0026display_name=jsFiddle\u0026url=https%3A%2F%2Fjsfiddle.net%2Fwhike_chan%2F1dku2378%2F\u0026image=https%3A%2F%2Fwww.gravatar.com%2Favatar%2Fa431425883e0e635dd395d98a814918d%3Fs%3D80\u0026key=94335756f04b424b8ce3ce71cbe3de0a\u0026type=text%2Fhtml\u0026schema=jsfiddle\" width=\"600\" height=\"400\" scrolling=\"no\" title=\"jsFiddle embed\" frameborder=\"0\" allow=\"autoplay; fullscreen\" allowfullscreen=\"true\"\u003e\u003c/iframe\u003e\u003cp\u003e\u003cbr\u003e\u003cspan style=\"color:#555555\"\u003eまず最初に\u003c/span\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode\u003econst squareAnime = anime.timeline({\n  duration: 800,\n  easing: 'easeInOutElastic',\n  direction: 'alternate',\n  loop: true,\n});\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eのようにタイムラインを作ります。 オプションを一括で設定でき、durationやeasingはそれぞれのアニメーションで上書きもできます。\u003cbr\u003e各アニメーションは\u003c/p\u003e\u003cpre\u003e\u003ccode\u003esquareAnime\n  .add({\n    targets: '.square1',\n    translateY: '400%',\n  })\n  .add({\n    targets: '.square2',\n    translateX: '900%',\n  })\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eのように\u003ccode\u003e.add\u003c/code\u003eで繋げていきます。 タイムラインのパラメータを上書きしたいときは\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e.add({\n  targets: '.hoge',\n  easing: 'linear'\n})\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eとすればOKです。\u003cbr\u003eまた単純に連続で実行するだけでなく、同時に実行したり遅延させたりしたいときは\u003ca href=\"https://animejs.com/documentation/#timelineOffsets\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eタイムオフセット\u003c/a\u003eという機能を使います。\u0026nbsp;\u003ccode\u003e.add\u003c/code\u003eのオプションとして使用できます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e.add({\n  targets: '.hoge',\n  translateY: 100,\n  duration: 500,\n})\n.add({\n  targets: '.fuga',\n  translateY: 100,\n}, '-=500')\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ccode\u003e-=500\u003c/code\u003eは前のアニメーションが終了する500ms前に開始するという意味です。 前のアニメーション（\u003ccode\u003e.hoge\u003c/code\u003e）は500msかけて実行されるので、\u003ccode\u003e.hoge\u003c/code\u003eと\u003ccode\u003e.fuga\u003c/code\u003eは同時に実行されることになります。 逆に遅延させたい場合は\u003ccode\u003e+=\u003c/code\u003eと記述します。\u003c/p\u003e\u003ch3 id=\"h9be390a8f8\"\u003eCallback\u003c/h3\u003e\u003cp\u003eこのアニメーションが終わったらjsを発火させたい、というときのために アニメーションが始まった/終わった/ループした などのタイミングで呼び出される\u003ca href=\"https://animejs.com/documentation/#update\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eコールバック\u003c/a\u003eが用意されています。\u003cbr\u003e先ほどのアニメーションに手を加え、ループのたびにSVGアニメが発動するようにしてみました。\u003c/p\u003e\u003ciframe class=\"embedly-embed\" src=\"https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fjsfiddle.net%2Fwhike_chan%2Fj48eq6bg%2Fembedded%2F\u0026display_name=jsFiddle\u0026url=https%3A%2F%2Fjsfiddle.net%2Fwhike_chan%2Fj48eq6bg%2F\u0026image=https%3A%2F%2Fwww.gravatar.com%2Favatar%2Fa431425883e0e635dd395d98a814918d%3Fs%3D80\u0026key=94335756f04b424b8ce3ce71cbe3de0a\u0026type=text%2Fhtml\u0026schema=jsfiddle\" width=\"600\" height=\"400\" scrolling=\"no\" title=\"jsFiddle embed\" frameborder=\"0\" allow=\"autoplay; fullscreen\" allowfullscreen=\"true\"\u003e\u003c/iframe\u003e\u003cp\u003e\u003cbr\u003eタイムラインに\u003ccode\u003eloopComplete()\u003c/code\u003eを設定し、ループが終わるたびにアニメーションを動かすjsを呼び出すように設定しました。\u003cbr\u003eタイムライン全体が始まったとき/終わったときに動かしたい場合はこれで良いのですが、\u003ccode\u003e.add\u003c/code\u003eしていった各アニメーションが動くタイミングで何かをしたいときもあると思います。 その場合は\u003c/p\u003e\u003cpre\u003e\u003ccode\u003ehogeAnimation\n  .add({\n    targets: '.hoge',\n    opacity: 1,\n    begin: function() {\n      console.log('.hoge実行前');\n    },\n    complete: function() {\n      console.log('.hoge実行完了');\n    }\n  })\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eのように書くことで実装できます。 サンプルのように他のJSを発動させたり、CSSアニメーションのために\u003ccode\u003ewill-change\u003c/code\u003eを設定しておいて、アニメーションが終わったら\u003ccode\u003eauto\u003c/code\u003eに戻したりするのに使えます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// $hogeが要素だとして、初期スタイルでwill-changeを設定しておく\n$hoge.style.willChange = 'opacity transform';\n\n// アニメーションが済んだらautoに戻しておく\n// ～タイムラインの記述省略～\n.add({\n  targets: $hoge,\n  opacity: 1,\n  scaleY: 1,\n  complete: function() {\n    $hoge.style.willChange = 'auto';\n  }\n})\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"hcbec2bf0d9\"\u003e\u003cbr\u003e終わりに\u003c/h2\u003e\u003cp\u003eタイムラインを使えば直感的かつ簡単にアニメーションを管理できてたのしかったです😁\u0026nbsp;今回は使いませんでしたが、SVGのラインアニメーションやタイムラインの再生/停止などもいじれるので、いろんな活用方法がありそうです。\u003cbr\u003eたまに、CSSとJS両方で同じプロパティを指定すると思い通りに動かないことがあったので（durationとかopacityの値とか）、 もしうまくいかなかったら設定はJSだけでやるなど試してみてください。\u003cbr\u003e以上です！\u003c/p\u003e\u003ch2 id=\"h3de35099b3\"\u003e\u003cbr\u003e参考\u003c/h2\u003e\u003cp\u003e\u003ca href=\"https://animejs.com/documentation/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eDocumentation | anime.js\u003c/a\u003e\u0026nbsp;\u003ca href=\"https://tr.you84815.space/animejs/index.html\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eanime.jsドキュメント翻訳 | anime.js - にほんご。\u003c/a\u003e\u0026nbsp;\u003ca href=\"https://ics.media/entry/14973/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003e現場で使えるアニメーション系JSライブラリまとめ（2020年版） - GSAP, CreateJS, WebAnimation, Velocityなど - ICS MEDIA\u003c/a\u003e\u0026nbsp;\u003ca href=\"https://qiita.com/baby-degu/items/2516bb55e97de612118b\" target=\"_blank\" rel=\"noopener noreferrer\"\u003e2019年注目のJavaScriptアニメーションライブラリ11選 - Qiita\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e","category":{"id":"javascript","createdAt":"2022-03-24T07:10:27.304Z","updatedAt":"2022-03-24T07:10:27.304Z","publishedAt":"2022-03-24T07:10:27.304Z","revisedAt":"2022-03-24T07:10:27.304Z","name":"JavaScript"},"tag":[]},{"id":"31apigdy1nas","createdAt":"2022-03-24T10:06:24.313Z","updatedAt":"2022-03-24T10:07:38.835Z","publishedAt":"2022-02-10T10:06:24.000Z","revisedAt":"2022-03-24T10:07:38.835Z","title":"anime.jsでスムーズスクロール実装","body":"\u003cp\u003eわざわざスムーズスクロールをanime.jsで実装する必要はないのですが、もともとanime.jsを組み込んでいたのでスクロールのために他のライブラリ入れるのはなーと思い実装してみました。\u003cbr\u003e\u003c/p\u003e\u003ciframe class=\"embedly-embed\" src=\"https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fjsfiddle.net%2Fwhike_chan%2Fk0rxob5d%2Fembedded%2F\u0026display_name=jsFiddle\u0026url=https%3A%2F%2Fjsfiddle.net%2Fwhike_chan%2Fk0rxob5d%2F\u0026image=https%3A%2F%2Fwww.gravatar.com%2Favatar%2Fa431425883e0e635dd395d98a814918d%3Fs%3D80\u0026key=94335756f04b424b8ce3ce71cbe3de0a\u0026type=text%2Fhtml\u0026schema=jsfiddle\" width=\"600\" height=\"400\" scrolling=\"no\" title=\"jsFiddle embed\" frameborder=\"0\" allow=\"autoplay; fullscreen\" allowfullscreen=\"true\"\u003e\u003c/iframe\u003e\u003cp\u003e\u003cbr\u003e※埋め込みだと高さがいじれなくてスクロールがちゃんと見られないので、動作は右上のEdit in JSFiddleから飛んで見てください・・m(\u003cem\u003e \u003c/em\u003e)m\u003cbr\u003e\u003cbr\u003eページの一番上に移動する分には、scrollTopという箇所に0を設定するだけでいいので楽です。\u003cbr\u003eしかし、指定した要素に飛ぶという機能はどうやら無いようで、そこだけ自分で設定するのがちょっと面倒でした。\u003cbr\u003eとはいえjQueryいらずで、イージングやdurationの指定がとてもかんたんで便利でした:smile:\u003cbr\u003e\u003cbr\u003e参考\u003cbr\u003e\u003ca style=\"color:#258fb8\" href=\"https://animejs.com/documentation/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eDocumentation | anime.js\u003c/a\u003e\u003cbr\u003e\u003ca style=\"color:#258fb8\" href=\"https://github.com/juliangarnier/anime/issues/197\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eScroll document to element? · Issue #197 · juliangarnier/anime\u003c/a\u003e\u003cbr\u003e\u003ca style=\"color:#258fb8\" href=\"https://tr.you84815.space/animejs/index.html\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eanime.jsドキュメント翻訳 | anime.js - にほんご。\u003c/a\u003e\u003c/p\u003e","category":{"id":"javascript","createdAt":"2022-03-24T07:10:27.304Z","updatedAt":"2022-03-24T07:10:27.304Z","publishedAt":"2022-03-24T07:10:27.304Z","revisedAt":"2022-03-24T07:10:27.304Z","name":"JavaScript"},"tag":[]},{"id":"1zk8o5cgg2im","createdAt":"2022-03-24T07:20:57.996Z","updatedAt":"2022-03-24T07:20:57.996Z","publishedAt":"2022-02-08T07:20:57.000Z","revisedAt":"2022-03-24T07:20:57.996Z","title":"Flexboxでフッター下付けIE対応","body":"\u003cp\u003e\u003cspan style=\"color:#555555\"\u003e何回やっても忘れるのでメモしておきます。\u003c/span\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e\u0026lt;div class=\"wrapper\"\u0026gt;\n\u0026nbsp; \u0026nbsp; \u0026lt;div class=\"contents-wrapper\"\u0026gt;\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026lt;div class=\"contents\"\u0026gt;\u0026nbsp; \u0026nbsp;\u0026nbsp;\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; ~ページのコンテンツ~\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026lt;/div\u0026gt;\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026lt;footer\u0026gt;\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; ~フッター~\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026lt;/footer\u0026gt;\n\u0026nbsp; \u0026nbsp; \u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e.wrapper {\n\u0026nbsp; \u0026nbsp; display: flex;\n}\n.contents-wrapper {\n\u0026nbsp; \u0026nbsp; display: flex;\n\u0026nbsp; \u0026nbsp; flex-flow: column;\n\u0026nbsp; \u0026nbsp; width: 100%;\n\u0026nbsp; \u0026nbsp; min-height: 100vh;\n}\n.contents {\n\u0026nbsp; \u0026nbsp; flex: 1 0 auto;\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003edivやらでムダなwrapperを増やしたくないのですが、IE対応するにはこうなります。\u003cbr\u003eまた、画面高さいっぱいに引き伸ばしたい要素（例だと\u003ccode\u003e.contents\u003c/code\u003e）に対しては\u003cbr\u003e\u003ccode\u003eflex: 1;\u003c/code\u003eで良いのですが、省略するとIEで壊れるため\u003ccode\u003eflex: 1 0 auto;\u003c/code\u003eと書きます。\u003cbr\u003e\u003cbr\u003e\u003cspan style=\"color:#555555\"\u003eまあCSSで対応できるだけありがたいです😘\u003c/span\u003e\u003c/p\u003e","category":{"id":"css","createdAt":"2022-03-24T07:09:42.610Z","updatedAt":"2022-03-24T07:09:42.610Z","publishedAt":"2022-03-24T07:09:42.610Z","revisedAt":"2022-03-24T07:09:42.610Z","name":"CSS"},"tag":[{"id":"for-ie","createdAt":"2022-03-24T07:14:43.882Z","updatedAt":"2022-03-24T07:14:43.882Z","publishedAt":"2022-03-24T07:14:43.882Z","revisedAt":"2022-03-24T07:14:43.882Z","name":"IE"},{"id":"flexbox","createdAt":"2022-03-24T07:15:05.078Z","updatedAt":"2022-03-24T07:15:05.078Z","publishedAt":"2022-03-24T07:15:05.078Z","revisedAt":"2022-03-24T07:15:05.078Z","name":"Flexbox"}]}],"totalCount":9},"__N_SSG":true},"page":"/blog/page/[num]","query":{"num":"1"},"buildId":"ocqdSihvkso1s5JVS6EZE","assetPrefix":"/nextjs-microcms-blog-test","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>